<%- layout('layouts/boilerplate') %>
<% const title = 'Reset Password' %>

<div class="auth-form bg-white">
    <h2 class="text-center text-danger mb-4">Reset Password</h2>
    
    <form action="/reset-password/<%= token %>" method="POST" class="needs-validation" novalidate>
        <div class="mb-3">
            <label for="password" class="form-label">New Password</label>
            <div class="input-group">
                <input type="password" class="form-control" id="password" name="password" required>
                <button class="btn btn-outline-secondary toggle-password" type="button" data-target="#password">
                    <i class="fas fa-eye"></i>
                </button>
                <div class="invalid-feedback">
                    Please enter a new password.
                </div>
            </div>
            <small class="form-text text-muted">
                Password must be at least 8 characters and include a combination of letters, numbers, and special characters.
            </small>
        </div>
        
        <div class="mb-4">
            <label for="confirmPassword" class="form-label">Confirm New Password</label>
            <div class="input-group">
                <input type="password" class="form-control" id="confirmPassword" required>
                <button class="btn btn-outline-secondary toggle-password" type="button" data-target="#confirmPassword">
                    <i class="fas fa-eye"></i>
                </button>
                <div class="invalid-feedback">
                    Passwords do not match.
                </div>
            </div>
        </div>
        
        <div class="d-grid">
            <button type="submit" class="btn btn-danger">Reset Password</button>
        </div>
    </form>
</div>

<script>
    // Validate confirm password
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.querySelector('form');
        
        form.addEventListener('submit', function(event) {
            const password = document.getElementById('password');
            const confirmPassword = document.getElementById('confirmPassword');
            
            if (password.value !== confirmPassword.value) {
                confirmPassword.setCustomValidity('Passwords do not match');
                event.preventDefault();
                event.stopPropagation();
            } else {
                confirmPassword.setCustomValidity('');
            }
        });
    });
</script> 